@if (post()) {
<main class="post-detail">
  <div class="post-container">
    <section class="post-hero">
      <h1 class="post-title">{{ post()!.title }}</h1>
      <div class="post-image">
        <img [src]="post()!.image" [alt]="post()!.title" />
      </div>
    </section>

    <div class="post-content-wrapper">
      <div class="post-main">
        <header class="post-header">
          <div class="author-info">
            <div class="author-avatar">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512 512"
                width="24"
                height="24"
              >
                <circle cx="256" cy="256" r="200" fill="#FFFFFF" />
                <circle cx="256" cy="200" r="80" fill="#808080" />
                <path d="M128 400c0-70 56-128 128-128s128 58 128 128" fill="#808080" />
              </svg>
            </div>
            <div class="author-details">
              <span class="author-name">{{ post()!.author }}</span>
              <span class="post-date">Posted at {{ post()!.publishedAt }}</span>
            </div>
          </div>
        </header>

        <!-- Post Content -->
        <div class="post-body">
          <div class="post-categories">
            @for (category of post()!.categories; track $index) {
            <span class="category-tag">{{ category }}</span>
            }
          </div>

          <div class="post-text">
            @for (paragraph of post()!.content.split('\n\n'); track $index) {
            <p>{{ paragraph }}</p>
            }
          </div>
        </div>

        <!-- Comments Section -->
        <section class="comments-section">
          <h3 class="comments-title">Comentarios</h3>

          <!-- Comment Form -->
          <form
            class="comment-form"
            [formGroup]="commentForm"
            (ngSubmit)="onSubmitComment()"
          >
            <div class="comment-input-wrapper">
              <div class="comment-avatar">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  width="32"
                  height="32"
                >
                  <circle cx="256" cy="256" r="200" fill="#FFFFFF" />
                  <circle cx="256" cy="200" r="80" fill="#808080" />
                  <path d="M128 400c0-70 56-128 128-128s128 58 128 128" fill="#808080" />
                </svg>
              </div>
              <div class="comment-input-content">
                <textarea
                  class="comment-textarea"
                  [class.error]="hasCommentError()"
                  formControlName="comment"
                  placeholder="Escribe tu comentario..."
                  rows="4"
                ></textarea>
                @if (hasCommentError()) {
                <span class="error-message">{{ getCommentError() }}</span>
                }
                <div class="comment-actions">
                  <button
                    type="submit"
                    class="btn-submit"
                    [disabled]="commentForm.invalid"
                  >
                    Publicar comentario
                  </button>
                </div>
              </div>
            </div>
          </form>

          <div class="punlished-comments">
            @for (comment of comments(); track comment.id) {
            <div class="comment">
              <div class="comment-avatar">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  width="32"
                  height="32"
                >
                  <circle cx="256" cy="256" r="200" fill="#FFFFFF" />
                  <circle cx="256" cy="200" r="80" fill="#808080" />
                  <path d="M128 400c0-70 56-128 128-128s128 58 128 128" fill="#808080" />
                </svg>
              </div>
              <div class="comment-content">
                <div class="comment-header">
                  <span class="comment-author">{{ comment.author }}</span>
                  @if (comment.isTeamMember) {
                  <span class="team-badge">DevTalles Team</span>
                  }
                </div>
                <p class="comment-text">{{ comment.content }}</p>
                <span class="comment-time">{{ comment.publishedAt }}</span>
              </div>
            </div>
            }
          </div>
        </section>
      </div>

      <!-- Sidebar -->
      <aside class="post-sidebar">
        <div class="sidebar-widget">
          <div class="widget-header">
            <div class="author-avatar">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512 512"
                width="40"
                height="40"
              >
                <circle cx="256" cy="256" r="200" fill="#FFFFFF" />
                <circle cx="256" cy="200" r="80" fill="#808080" />
                <path d="M128 400c0-70 56-128 128-128s128 58 128 128" fill="#808080" />
              </svg>
            </div>
            <div>
              <h4>Author</h4>
              <p class="author-bio">
                Hello world! I love programming, playing videogames and drinking coffee!
              </p>
            </div>
          </div>
        </div>

        <div class="sidebar-widget">
          <h4>Más de Author</h4>
          <div class="related-posts">
            @for (i of [1,2,3,4,5,6,7,8]; track i) {
            <div class="related-post">
              <h5>Hello world!</h5>
              <div class="related-categories">
                <span class="category-tag small">Categoría</span>
                <span class="category-tag small">Categoría</span>
              </div>
            </div>
            }
          </div>
        </div>
      </aside>
    </div>
  </div>
</main>
}
